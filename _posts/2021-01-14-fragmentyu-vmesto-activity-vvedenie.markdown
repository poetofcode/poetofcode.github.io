---
layout: post
title: "Фрагменты вместо Activity: часть 1"
date: 2021-01-14 17:31:48 +0300
comments: true
category:
tags: [android, android-dev, programming]
images: /images/android/activity-01.png
---

Некоторым сюрпризом для начинающих Андроид-разработчиков становится тот факт, что по своей архитектуре Андроид-приложение ближе к Веб-сайтам, нежели чем к нативным Десктоп-приложениям.

В этом смысле Активити и Фрагменты гораздо легче сравнить со страницей сайта и HTML-блоками, из которых строится страница. Открытие новой Активити подобно открытию новой страницы в браузере, а Фрагменты подобны блокам `<div />` — они могут заполнять страницу целиком или частично.

> Проблема заключается в том, что разработчиками мобильных приложений обычно становятся те, кто приходит из мира Десктоп-разработки.

Они хотели бы применять привычные для себя (и проверенные годами) паттерны программирования.

Но есть возможность снизить побочные эффекты от задуманной проектировщиками Андроида архитектуры — а именно, использовать минимальное количество Активити в приложении (а лучше один экземпляр), а логику представлений реализовывать в классах полноэкранных Фрагментов. Я лично называю такой подход: `Single Activity App`, по аналогии с `Single Page App` из мире Веба.

Подробнее об этом я собираюсь рассказать в нескольких частях этого туториала.

## Фрагменты vs Активити

Есть несколько причин, чтобы реализовывать навигацию по экранам в Андроид-приложении посредством Фрагментов, а не Активити:

* Большая гибкость: фрагменты можно вставлять в любые Активити, т.е. переиспользовать, соответственно, легче реструктурировать код приложения под новые требования.
* У Фрагментов один контекст (в каждом экземпляре дочернего Фрагмента присутствует метод `getActivity()`, возвращающий объект хост-Активити (обычно `MainActivity`). Это открывает возможность расшаривать методы и свойства между Фрагментами.
* Переходы между Фрагментами отрабатываются быстрее, особенно это заметно на старых аппаратах с маленьким объёмом памяти.

Фрагменты очень похожи на Активити на первый взгляд. Но есть всё-таки некоторые отличия, как например:

1. В классе Фрагмента отсутствует обработчик кнопки “Назад”, который присутствует в классе Активити: `onBackPressed`
2. При переходах между Фрагментами не меняется заголовок окна, а также не появляется индикатор стрелки назад
3. По-умолчанию, переходы не сопровождаются анимациями

В дальнейших частях тутриала я рассмотрю решения всех этих проблем.